"use strict";var app=angular.module("ionic-datepicker",["ionic","ionic-datepicker.templates"]);app.service("DatepickerService",function(){}),app.directive("ionicDatepicker",["$ionicPopup","$injector",function(e,t){return{restrict:"AE",replace:!0,scope:{ipDate:"=idate",disablePreviousDates:"=disablepreviousdates",disableFutureDates:"=disablefuturedates",callback:"=callback",title:"=title",disabledDates:"=?disableddates",timezone:"=timezone"},link:function(a,n){a.datePickerTitle=a.title||"Select Date";var i=[{id:0,name:"January"},{id:1,name:"February"},{id:2,name:"March"},{id:3,name:"April"},{id:4,name:"May"},{id:5,name:"June"},{id:6,name:"July"},{id:7,name:"August"},{id:8,name:"Sepetember"},{id:9,name:"October"},{id:10,name:"November"},{id:11,name:"December"}];a.monthsList=i;var r=[];for(o=1901;2100>=o;o++)r.push({id:o,name:o});if(a.yearsList=r,a.currentMonth="",a.currentYear="",a.ipDate||(a.ipDate=new Date),angular.isDefined(a.disabledDates))for(var o=0;o<a.disabledDates.length;o++)a.disabledDates[o]=a.disabledDates[o].getTime();else a.disabledDates=[];a.previousDayEpoch=+new Date-864e5,a.nextDayEpoch=+new Date;var l=angular.copy(a.ipDate);l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),a.selctedDateString=l.toString(),a.weekNames=["S","M","T","W","T","F","S"],a.today={};var s=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return{dateObj:e,date:t.getDate(),month:t.getMonth(),year:t.getFullYear(),day:t.getDay(),dateString:t.toString(),epochLocal:t.getTime(),epochUTC:t.getTime()+60*t.getTimezoneOffset()*1e3}};if(a.timezone&&t.has("moment")){var c=t.get("moment"),d=c().tz(a.timezone);a.today=s(new Date(d.year(),d.month(),d.date()))}else a.today=s(new Date);var u=function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),l=angular.copy(e);var t=new Date(e.getFullYear(),e.getMonth(),1).getDate(),n=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();a.dayList=[];for(var i=t;n>=i;i++){var r=new Date(e.getFullYear(),e.getMonth(),i);a.dayList.push({date:r.getDate(),month:r.getMonth(),year:r.getFullYear(),day:r.getDay(),dateString:r.toString(),epochLocal:r.getTime(),epochUTC:r.getTime()+60*r.getTimezoneOffset()*1e3})}var t=a.dayList[0].day;a.currentMonthFirstDayEpoch=a.dayList[0].epochLocal,a.currentMonthLastDayEpoch=a.dayList[a.dayList.length-1].epochLocal;for(var o=0;t>o;o++)a.dayList.unshift({});a.rows=[],a.cols=[],a.currentMonth=l.getMonth(),a.currentYear=e.getFullYear(),a.currentMonthSelected=a.currentMonth,a.currentYearSelected=a.currentYear,a.numColumns=7,a.rows.length=6,a.cols.length=a.numColumns};a.monthChanged=function(){l.setDate(3),l.setMonth(a.currentMonth),a.currentYear=l.getFullYear(),u(l)},a.yearChanged=function(){l.setFullYear(a.currentYear),u(l)},a.prevMonth=function(){0===l.getMonth()?(l.setMonth(11),l.setFullYear(l.getFullYear()-1)):l.setMonth(l.getMonth()-1),a.currentMonth=l.getMonth(),a.currentYear=l.getFullYear(),u(l)},a.nextMonth=function(){11===l.getMonth()&&l.setFullYear(l.getFullYear()),l.setMonth(l.getMonth()+1),a.currentMonth=l.getMonth(),a.currentYear=l.getFullYear(),u(l)},a.date_selection={selected:!1,selectedDate:"",submitted:!1},a.dateSelected=function(e){a.selctedDateString=e.dateString,a.date_selection.selected=!0,a.date_selection.selectedDate=new Date(e.dateString),l=new Date(e.dateString)},n.on("click",function(){var n=new Date;a.ipDate?(n=angular.copy(a.ipDate),u(n)):u(n),a.date_selection.selected||a.dateSelected(s(n)),e.show({templateUrl:"date-picker-modal.html",title:a.datePickerTitle,subTitle:"",scope:a,buttons:[{text:"Close",onTap:function(e){a.callback(void 0)}},{text:"Today",onTap:function(e){var n;if(a.timezone&&t.has("moment")){var i=t.get("moment"),r=i().tz(a.timezone);n=new Date(r.year(),r.month(),r.date())}else n=new Date;n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0);var o=new Date(n.getFullYear(),n.getMonth(),n.getDate()),l={date:n.getDate(),month:n.getMonth(),year:n.getFullYear(),day:n.getDay(),dateString:n.toString(),epochLocal:o.getTime(),epochUTC:o.getTime()+60*o.getTimezoneOffset()*1e3};a.selctedDateString=l.dateString,a.date_selection.selected=!0,a.date_selection.selectedDate=new Date(l.dateString),u(new Date),e.preventDefault()}},{text:"Set",type:"button-positive",onTap:function(e){a.date_selection.submitted=!0,a.date_selection.selected===!0?(a.ipDate=angular.copy(a.date_selection.selectedDate),a.callback(a.ipDate)):e.preventDefault()}}]})})}}}]);