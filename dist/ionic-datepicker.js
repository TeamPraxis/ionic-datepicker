"use strict";var app=angular.module("ionic-datepicker",["ionic","ionic-datepicker.templates"]);app.service("DatepickerService",function(){}),app.directive("ionicDatepicker",["$ionicPopup","DatepickerService",function(e,t){return{restrict:"AE",replace:!0,scope:{ipDate:"=idate",disablePreviousDates:"=disablepreviousdates",disableFutureDates:"=disablefuturedates",callback:"=callback",title:"=title",disabledDates:"=?disableddates"},link:function(t,a,n){t.datePickerTitle=t.title||"Select Date";var i=[{id:0,name:"January"},{id:1,name:"February"},{id:2,name:"March"},{id:3,name:"April"},{id:4,name:"May"},{id:5,name:"June"},{id:6,name:"July"},{id:7,name:"August"},{id:8,name:"Sepetember"},{id:9,name:"October"},{id:10,name:"November"},{id:11,name:"December"}];t.monthsList=i;var r=[];for(o=1901;2100>=o;o++)r.push({id:o,name:o});if(t.yearsList=r,t.currentMonth="",t.currentYear="",t.ipDate||(t.ipDate=new Date),angular.isDefined(t.disabledDates))for(var o=0;o<t.disabledDates.length;o++)t.disabledDates[o]=t.disabledDates[o].getTime();else t.disabledDates=[];t.previousDayEpoch=+new Date-864e5,t.nextDayEpoch=+new Date;var l=angular.copy(t.ipDate);l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),t.selctedDateString=l.toString(),t.weekNames=["S","M","T","W","T","F","S"],t.today={};var s=new Date,c=new Date(s.getFullYear(),s.getMonth(),s.getDate());t.today={dateObj:s,date:c.getDate(),month:c.getMonth(),year:c.getFullYear(),day:c.getDay(),dateString:c.toString(),epochLocal:c.getTime(),epochUTC:c.getTime()+60*c.getTimezoneOffset()*1e3};var d=function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),l=angular.copy(e);var a=new Date(e.getFullYear(),e.getMonth(),1).getDate(),n=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();t.dayList=[];for(var i=a;n>=i;i++){var r=new Date(e.getFullYear(),e.getMonth(),i);t.dayList.push({date:r.getDate(),month:r.getMonth(),year:r.getFullYear(),day:r.getDay(),dateString:r.toString(),epochLocal:r.getTime(),epochUTC:r.getTime()+60*r.getTimezoneOffset()*1e3})}var a=t.dayList[0].day;t.currentMonthFirstDayEpoch=t.dayList[0].epochLocal,t.currentMonthLastDayEpoch=t.dayList[t.dayList.length-1].epochLocal;for(var o=0;a>o;o++)t.dayList.unshift({});t.rows=[],t.cols=[],t.currentMonth=l.getMonth(),t.currentYear=e.getFullYear(),t.currentMonthSelected=t.currentMonth,t.currentYearSelected=t.currentYear,t.numColumns=7,t.rows.length=6,t.cols.length=t.numColumns};t.monthChanged=function(){l.setDate(3),l.setMonth(t.currentMonth),t.currentYear=l.getFullYear(),d(l)},t.yearChanged=function(){l.setFullYear(t.currentYear),d(l)},t.prevMonth=function(){0===l.getMonth()?(l.setMonth(11),l.setFullYear(l.getFullYear()-1)):l.setMonth(l.getMonth()-1),t.currentMonth=l.getMonth(),t.currentYear=l.getFullYear(),d(l)},t.nextMonth=function(){11===l.getMonth()&&l.setFullYear(l.getFullYear()),l.setMonth(l.getMonth()+1),t.currentMonth=l.getMonth(),t.currentYear=l.getFullYear(),d(l)},t.date_selection={selected:!1,selectedDate:"",submitted:!1},t.dateSelected=function(e){t.selctedDateString=e.dateString,t.date_selection.selected=!0,t.date_selection.selectedDate=new Date(e.dateString),l=new Date(e.dateString)},a.on("click",function(){if(t.ipDate)d(angular.copy(t.ipDate));else{var a=new Date;d(a)}e.show({templateUrl:"date-picker-modal.html",title:t.datePickerTitle,subTitle:"",scope:t,buttons:[{text:"Close",onTap:function(e){t.callback(void 0)}},{text:"Today",onTap:function(e){var a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);var n=new Date(a.getFullYear(),a.getMonth(),a.getDate()),i={date:a.getDate(),month:a.getMonth(),year:a.getFullYear(),day:a.getDay(),dateString:a.toString(),epochLocal:n.getTime(),epochUTC:n.getTime()+60*n.getTimezoneOffset()*1e3};t.selctedDateString=i.dateString,t.date_selection.selected=!0,t.date_selection.selectedDate=new Date(i.dateString),d(new Date),e.preventDefault()}},{text:"Set",type:"button-positive",onTap:function(e){t.date_selection.submitted=!0,t.date_selection.selected===!0?(t.ipDate=angular.copy(t.date_selection.selectedDate),t.callback(t.ipDate)):e.preventDefault()}}]})})}}}]);